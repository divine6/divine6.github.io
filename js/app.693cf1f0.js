(function(t){function e(e){for(var a,r,s=e[0],c=e[1],l=e[2],u=0,f=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&f.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],a=!0,s=1;s<i.length;s++){var c=i[s];0!==n[c]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},n={app:0},o=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0d56":function(t,e,i){"use strict";i("6938")},"56d7":function(t,e,i){"use strict";i.r(e);i("6da3"),i("dea3"),i("da68"),i("1311");var a=i("430a"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"uploadFacePic"},[a("main",{staticStyle:{marginTop:"20px"}},[a("div",{staticClass:"btn",on:{click:t.openCamera}},[t._v("开启人脸采集")])]),a("input",{staticStyle:{display:"none"},attrs:{id:"file",type:"file",accept:"image/*",capture:"camera"}}),t.cameraShow?a("div",{staticStyle:{width:"100%",position:"fixed",left:"0",bottom:"0",top:"0",right:"0"}},[a("div",{staticStyle:{width:"100%",position:"fixed",left:"0",bottom:"90vh",top:"0",right:"0",background:"black"}}),a("video",{staticStyle:{height:"65vh",width:"100vw",position:"fixed",top:"10vh",left:"0"}}),a("div",{staticStyle:{width:"100%",position:"fixed",left:"0",bottom:"25vh",top:"10vh",right:"0"}},[1==t.status?a("img",{staticStyle:{width:"100%",height:"100%",opacity:"0.8"},attrs:{src:i("f6f0"),alt:""}}):t._e(),2==t.status?a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.imageUrl,alt:""}}):t._e()]),a("div",{staticClass:"control"},[1==t.status?a("div",{staticClass:"control_before"},[a("div",{staticClass:"control_before_top"},[t._v("照片")]),a("div",{staticClass:"control_before_bottom"},[a("div",{staticClass:"smaller",on:{click:function(e){t.cameraShow=!1}}},[t._v("取消")]),a("div",{staticClass:"bigger",on:{click:t.snapPhoto}},[t._v("拍照")]),a("i",{staticClass:"iconfont icon-zhongxin small",on:{click:function(e){t.front=!t.front}}})])]):t._e(),2==t.status?a("div",{staticClass:"control_after"},[a("div",{staticClass:"smaller",on:{click:function(e){t.status=1}}},[t._v("重拍")]),a("div",{staticClass:"smaller",on:{click:function(e){return t.submitPhoto("custom")}}},[t._v("使用照片")])]):t._e()]),a("canvas",{attrs:{id:"mycanvas"}})]):t._e(),t.tipVisible?a("div",{staticClass:"tipinfo"},["ok"==t.tipInfo.result?a("div",{staticClass:"successContent"},[a("van-icon",{attrs:{name:"passed"}}),a("div",{staticClass:"title"},[t._v("采集成功")]),a("div",{staticClass:"info"},[t._v("恭喜您，完成人脸照片采集")]),a("div",{staticClass:"btn",on:{click:function(e){t.tipVisible=!1}}},[t._v(t._s("返回"+t.btntext))])],1):a("div",{staticClass:"failContent"},[a("van-icon",{attrs:{name:"warning-o"}}),a("div",{staticClass:"title"},[t._v("采集失败")]),a("div",{staticClass:"info"},[t._v(t._s(t.tipInfo.msg+",请重拍"))]),a("div",{staticClass:"btn",on:{click:function(e){t.tipVisible=!1}}},[t._v(t._s("返回"+t.btntext))])],1)]):t._e()])])},o=[],r=(i("89a8"),i("8fec"),i("b110"),i("fe35"),i("7216"),i("609b"),i("4c1e"),i("fee8"),i("a5db"),i("a2da"),i("6c25"),i("6bc3"),i("a704"),i("b81b"),i("1a1a"),i("c9e4"),i("a141"),i("2084"),i("0376"),i("be76"),i("4c71"),i("d8e8"),i("c857"),i("d6cc"),i("1fda"),i("744b"),i("2b35"),i("681b"),i("a541"),i("606c"),i("04fa"),i("465a"),i("8a04"),i("5ba6"),i("b81a"),i("541a"),i("13d9"),i("1767"),{data:function(){return{type:"",cameraShow:!1,status:0,imageUrl:"",front:!0,tipVisible:!1,tipInfo:{result:"fail",msg:"采集人脸失败"},btntext:"",time:null,imageFile:""}},mounted:function(){},methods:{openCamera:function(){this.cameraShow=!0;var t={audio:!1,video:{facingMode:this.front?"user":"environment"}};void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;return e?new Promise((function(i,a){e.call(navigator,t,i,a)})):Promise.reject(new Error("getUserMedia 这个浏览器还没实现"))});var e=this;navigator.mediaDevices.getUserMedia(t).then((function(t){var i=document.querySelector("video");i.srcObject=t,i.onloadedmetadata=function(t){i.play()},e.status=1})).catch((function(t){console.log("nonono",t),e.originCamera()}))},snapPhoto:function(){var t=document.querySelector("#mycanvas"),e=document.querySelector("video");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0),this.imageFile=this.canvasToFile(t);var i=new Promise((function(e,i){t.toBlob((function(t){var i=URL.createObjectURL(t);e(i)}))})),a=this;i.then((function(t){a.imageUrl=t,a.status=2}))},canvasToFile:function(t){var e=t.toDataURL("image/png"),i=e.split(","),a=i[0].match(/:(.*?);/)[1],n=atob(i[1]),o=n.length,r=new Uint8Array(o);while(o--)r[o]=n.charCodeAt(o);var s=new File([r],"phone.png",{type:a});return s},originCamera:function(){var t=this;t.cameraShow=!1;var e=new Promise((function(t,e){var i=document.getElementById("file");i.click(),i.onchange=function(i){i||e("empty");var a=i.target.files[0];t(a)}}));e.then((function(t){console.log("value---提交 :>> ",t)}))}}}),s=r,c=(i("0d56"),i("cba8")),l=Object(c["a"])(s,n,o,!1,null,"224d3c5a",null),d=l.exports,u=i("0afd"),f=i.n(u);a["a"].config.productionTip=!1,new f.a,new a["a"]({render:function(t){return t(d)}}).$mount("#app")},6938:function(t,e,i){},f6f0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAWCAYAAAAxSueLAAAAAXNSR0IArs4c6QAAAk5JREFUSEut1k2o1lUQx/HPDyItgmjh2rAXJKEoJbVdVqsQL6SJQataFCYEQkhptGhRtOhlUbRLUUrDikJRKIgkDMIoI5SKXjYVZVEUERZMjPwT6fo8z9V7Z/k/58x35pyZ+f1jjFXVajyGa3HBiK2FE3gZjyT5Y5TLjFqoqinsxXa8hZNj4roCW3ActyTpAKbZONhn+CDJPeOy/2+tqq7DR7g9yYEZw6rqLuzE9Uk+mQms91TV25iPVUmm3cTpzKrqZtzQAKzH00kemilogF2DQ/gBr+LrfoIkv/R6quoivI7b8Dm+6ndKsudcQGdc50J0kDfiyuH72iTvNOwp3N2wJJ+eD2BMkc3DC1iDRQ37pj8keXJCGyzGA7gJl+BL7Ma32Jhk3dnOV1Xv/RkbGtZ9cV+SLoizWlXdj2dxFG/iNyzDHfi72yLJgjHnf8TWibChsd/A5iTPnOmwqq7Gflw6V7BjeD/JvSOu6aqh1F+cVWZV1Y66QpclOTLG2YU9zpL8OSKgyddYVcvxHi4b5Wjor+ewIMmG84YNjtrJTxMq9V0cS9KFNM2qanJmA6xLfmmSXSMcLcHHmEqyb7awh/F491iS5/9XjZejh+73SXrcjWqdGWfWsG2Dnn04yM3v6CnfA7t7b3WS1rRZw+7sK8IT2ISVuBhfDBNkR5J/Jrzp6cx+xYNJXhp3YDZrVdVTf3NPkJaE75K0rMy5VdUKHG4VaNgqHMQreG2C/J9rMC0x/eaHk0ydEs+qunWouBbOngZzYf0f0iLaA/7RJH/9C+7bMe9T3kVKAAAAAElFTkSuQmCC"}});
//# sourceMappingURL=app.693cf1f0.js.map